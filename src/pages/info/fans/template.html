<Layout>
  <div slot="header">
    <myhead :hval="header"></myhead>
  </div>

  <scroller :on-infinite="onInfinite" :on-refresh="onRefresh" :noDataText="noDataText" ref="my_scroller" loadingLayerColor="#b0abbd">
    <div class="index-wrap whiteCR  fadeIn animateds">
      <table class="">
        <thead>
          <tr class="">
            <template v-for="(item,index) in tabs" >
              <th :class="[{'special':index ==3}]" @click.prevent="changeType(item,index)">
                {{item.name}}
                <i :class="['iconfont icon-sort1 grayCR f21',{'greenCR':index == isCur}]" v-if="index != 0"></i>
              </th>
            </template>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(item,index) in listData" @click.prevent="fetchFans(item)">
            <td class="tL">
              <dl class="flexBox">
                <dt><img :src="globalAvatar+(item.avatar?item.avatar:'')+'?imageView2/2/w/100/h/100/t/'" alt="" ></dt>
                <dd class="flex1 tL">{{item.nick}}</dd>
              </dl>
            </td>
            <td>
              {{item.count}}
            </td>
            <td>
              {{item.amount}}
            </td>
            <td>
              {{item.lastbuy}}
            </td>
          </tr>
        </tbody>
      </table>
      <div class="tC noDataDiv"  v-if="noData">
        <nodate noText="暂无记录"></nodate>
      </div>
    </div>
    <endWechat :wechat_code_show.sync="wechat_code_show" @wechat="wechatOpen('wechat_code')"></endWechat>
  </scroller>

  <div slot="footer">
    <endWechat2 :wechat_code2.sync="wechat_code" @hide2="closeDialog('wechat_code')"  :fail='true'></endWechat2>
    <modal-dialog :dialogshow2.sync="seeDetail" @hide="closeDialog('seeDetail')"  :fail='true'>
      <div class="dialog-header" slot="dialog-header">
        {{fansName}}的战力
      </div>

    <div class="success" slot="dialog-body">
      <template v-for="(item,index) in fansList">
        <div class="bg">
          
        <h3 class="greenCR tL">{{item.created_at}}</h3>
        <dl class="flexBox">
          <dt>商品：</dt>
          <dd class="flex1">
            {{item.title}}
          </dd>
        </dl>
        <dl class="flexBox">
          <dt>价格：</dt>
          <dd class="flex1">{{item.amount}} 元</dd>
        </dl>
        <dl class="flexBox">
          <dt>数量：</dt>
          <dd class="flex1">{{item.count}}</dd>
        </dl>
        <dl class="flexBox">
          <dt>订单号：</dt>
          <dd class="flex1">{{item.orderid}}</dd>
        </dl>
        <dl class="flexBox special">
          <dt>收件人：</dt>
          <dd class="flex1">{{item.receiver}}</dd>
        </dl>
        <dl class="flexBox">
          <dt>电话：</dt>
          <dd class="flex1">{{item.mobileno}}</dd>
        </dl>
        <dl class="flexBox">
          <dt>地址：</dt>
          <dd class="flex1">{{item.address}}</dd>
        </dl>        
        </div>
      </template>
      <p v-if="fansTotal > fansPn" class="greenCR tC" @click.prevent="fetchInfo(2)">查看更多</p>

    </div>
      <dl class="dialog-footer" slot="dialog-footer">
        <dd  @touchend.prevent="closeDialog('seeDetail')">
          <button type="button" class="btn btn-green">确定</button>
        </dd>
      </dl>    
    </modal-dialog>
    
  </div>


  
</Layout>